---
layout: post
permalink: /alternative-patterns-in-JS-OLOO-style
title: 'Alternative patterns in JS: OLOO style'
path: _posts/2016-04-25-alternative-patterns-in-JS-OLOO-style.md
time: 5
---

This is my fourth and last post in the series of "JS: Leave the classes to those other languages". If you havenâ€™t checked out the first three posts, you can read them on [JS: Leave the classes to those other languages](/js-leave-the-classes-to-those-other-languages), [JS Prototype chain mechanism](/js-prototype-chain-mechanism) and [Pseudoclasses and Prototypal Inheritance in JS](/pseudoclasses-and-prototypal-inheritance-in-JS).

### Delegation Oriented Design

Ok, we don't want to work with classes in JS but what's the alternative?<br>
How can I make a considerate and efficient use of the prototype chain to work with objects?

Prototypes represent a fundamentally different design pattern from classes and we need to change our thinking from the _class/inheritance design pattern_ to the _behaviour delegation design pattern_.

We observed before that in the prototype chain mechanism if an object does not know how to retrieve a property it tries to ask to the object above in the chain.<br>
It delegates.

We use the OLOO style pattern here to embrace delegation.

### What is OLOO?

OLOO just stands for objects-linked-to-other-objects.

It's a style pattern which embraces delegation oriented design and the nature of JS in general. One of the thing I like most about OLOO is the fact we can completely get rid of the confusing `new` operator.
No more need to use function as a constructor to create objects; `Object.create()` method will be our hero here.

Let's have a look at how we can implement the same Student / Person relation using OLOO.


{% highlight javascript %}
var Person = {
  init: function(name) {
    this.name = name;
  },
  getName: function() {
    return this.name;
  }
};

var Student = Object.create(Person);

Student.set = function(name, school) {
  this.init(name);
  this.school = school;
};

Student.getSchool = function() {
  return this.school;
};

var giamir = Object.create(Student);
giamir.set('Giamir', 'TWU');

giamir.getName(); // Giamir
giamir.getSchool(); // TWU
{% endhighlight %}

Here is a mental map of the prototype chain generated by the code above.

![OLOO style](http://i.imgur.com/jSGAI9g.jpg)

You can tell at first glance that using OLOO cleans the "mental mess" up.<br>
There are no brainfuls here. Thumbs up for OLOO!

Let's comment the code.

We create an object `Person` with a couple of methods using the literal form and JS automatically links the `Person` object to `Object.prototype` in the chain.<br>
After we create an object `Student` linked to `Person` using the `Object.create()` method; `Student` will be able to use all the methods which are in the `Person` object.<br>
We extend the `Student` object with some methods and then we are ready to add objects which need to use all the `Student` methods to the chain.<br>
So I can add a `giamir` object writing:
{% highlight javascript %}
var giamir = Object.create(Student);
giamir.set('Giamir', 'TW University');
{% endhighlight %}

In case I want to add another object `charlotte` for example I can simply write:
{% highlight javascript %}
var charlotte = Object.create(Student);
charlotte.set('Charlotte', 'UCL');
{% endhighlight %}

I can have lot of "students" all be able to use the same `Student` methods and have different `name` and `school` properties at the same time.

#### Gimme more

If you grasped the OLOO style pattern and you want to have a look at a slightly more complicated exemplar you can have a look at my Airport Challenge KATA solved using OLOO.

[Airport Challenge KATA](https://github.com/giamir/airport_challenge_oloo)

### Wrapping up

This series of articles aimed to answer essentially 2 questions:

* Why is so complicated to work with pseudoclasses?
* Do we really need to fake classes in JS?

* __Because it does not embrace the language. It's like having a dolby surround system and listen mono. Actually it's even worst because to "listen mono" (use classes) you need to use your modern system (JS) in an unnatural way (use constructors to simulate classes).__


* __NO, JS is a very powerful programming language and take a "faking classes" approach limits your code. You completely miss what makes JS so cool and interesting.__

These are just my answers; I would like to hear yours.<br>
Drop a comment below!

### Further reading

This topic was also the subject of the speech I presented as part of my [ThoughtWorks](https://www.thoughtworks.com) application process. Slides and video are available at the following links.

* [Slides](https://speakerdeck.com/giamir/js-leave-the-classes-to-those-other-languages)
* [Video _15 mins_](https://www.youtube.com/watch?v=HnQ0FPwcaZ4&feature=youtu.be)

If you would like to expand upon these aspects of JS here is a list of useful resources:

* [JS Objects: Inherited a mess - _Kyle Simpson_](https://davidwalsh.name/javascript-objects)
* [JavaScript constructors, prototypes, and the new keyword - _Pivotal Labs_](https://blog.pivotal.io/labs/labs/javascript-constructors-prototypes-and-the-new-keyword)
* [The Two Pillars of JavaScript - _Eric Elliott_](https://medium.com/javascript-scene/the-two-pillars-of-javascript-ee6f3281e7f3)
* [You Don't Know JS: this & Object Prototypes - _Kyle Simpson's book_](https://github.com/getify/You-Dont-Know-JS/blob/master/this%20&%20object%20prototypes/README.md#you-dont-know-js-this--object-prototypes)
